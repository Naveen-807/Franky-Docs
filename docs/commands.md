# FrankyDocs Command Reference

All commands are written in the Commands table in the Google Doc. Commands must start with `DW` unless auto-detected. By default, the agent only suggests commands in the Chat table. Use `!execute <text>` in Chat if you want it inserted into the Commands table.

## Command lifecycle
Commands flow through these states:
- `INVALID` -> `PENDING_APPROVAL` -> `APPROVED` -> `EXECUTING` -> `EXECUTED`
- `REJECTED` and `REJECTED_POLICY` are terminal
- `FAILED` is terminal

Notes:
- `DW /setup` is auto-approved.
- All other commands start in `PENDING_APPROVAL`.
- For demos with quorum 1 or no signers, you can type `APPROVED` in the status cell to advance a command.
- To enable status-cell approvals for multi-signer demos, set `DOC_CELL_APPROVALS=1` in the Config table.

## Core commands

| Command | Alias | Approvals | Chain/Integration | Example | Notes |
| --- | --- | --- | --- | --- | --- |
| `DW /setup` | `DW SETUP` | No | Local | `DW /setup` | Generates EVM + Sui wallets, creates Circle wallet if enabled |
| `DW STATUS` | | Yes | Local | `DW STATUS` | Returns quorum and signer count; includes Yellow session if present |
| `DW QUORUM <n>` | | Yes | Local | `DW QUORUM 2` | Sets approval quorum |
| `DW SIGNER_ADD <addr> WEIGHT <n>` | | Yes | Local | `DW SIGNER_ADD 0x... WEIGHT 1` | Adds or updates a signer |
| `DW POLICY ENS <name.eth>` | | Yes | ENS | `DW POLICY ENS frankydocs.eth` | Loads policy from ENS key `docwallet.policy` |

## Treasury (Arc / Circle)

| Command | Alias | Approvals | Chain/Integration | Example | Notes |
| --- | --- | --- | --- | --- | --- |
| `DW PAYOUT <amt> USDC TO <addr>` | | Yes | Arc / Circle | `DW PAYOUT 1 USDC TO 0x...` | Circle is preferred if enabled; falls back to Arc RPC |
| `DW PAYOUT_SPLIT <amt> USDC TO <a>:<pct>,<b>:<pct>` | | Yes | Arc / Circle | `DW PAYOUT_SPLIT 10 USDC TO 0x...:50,0x...:50` | Executes multiple transfers |
| `DW SCHEDULE EVERY <N>h: <command>` | | Yes | Local | `DW SCHEDULE EVERY 24h: PAYOUT 1 USDC TO 0x...` | Creates a recurring schedule |
| `DW UNSCHEDULE <sched_id>` | `DW CANCEL_SCHEDULE <sched_id>` | Yes | Local | `DW UNSCHEDULE sched_123` | Cancels a schedule |
| `DW BRIDGE <amt> USDC FROM <chain> TO <chain>` | | Yes | Circle | `DW BRIDGE 10 USDC FROM arc TO sui` | Valid chains: `arc`, `sui`, `ethereum`, `arbitrum`, `polygon` |

## Trading (Sui / DeepBook V3)

| Command | Alias | Approvals | Chain/Integration | Example | Notes |
| --- | --- | --- | --- | --- | --- |
| `DW LIMIT_BUY SUI <qty> USDC @ <price>` | | Yes | Sui DeepBook | `DW LIMIT_BUY SUI 5 USDC @ 1.02` | Only `SUI/USDC` supported in MVP |
| `DW LIMIT_SELL SUI <qty> USDC @ <price>` | | Yes | Sui DeepBook | `DW LIMIT_SELL SUI 5 USDC @ 1.50` | Only `SUI/USDC` supported in MVP |
| `DW MARKET_BUY SUI <qty>` | | Yes | Sui DeepBook | `DW MARKET_BUY SUI 2` | Market order via IOC limit |
| `DW MARKET_SELL SUI <qty>` | | Yes | Sui DeepBook | `DW MARKET_SELL SUI 2` | Market order via IOC limit |
| `DW CANCEL <orderId>` | | Yes | Sui DeepBook | `DW CANCEL <orderId>` | Cancels open order |
| `DW SETTLE` | | Yes | Sui DeepBook | `DW SETTLE` | Settles filled proceeds |
| `DW DEPOSIT <coin> <amt>` | | Yes | Sui DeepBook | `DW DEPOSIT SUI 1` | Deposits into BalanceManager |
| `DW WITHDRAW <coin> <amt>` | | Yes | Sui DeepBook | `DW WITHDRAW SUI 1` | Withdraws from BalanceManager |

## Yellow Network (gasless approvals)

| Command | Alias | Approvals | Chain/Integration | Example | Notes |
| --- | --- | --- | --- | --- | --- |
| `DW SESSION_CREATE` | | Yes | Yellow NitroRPC | `DW SESSION_CREATE` | Creates app session using delegated signer keys |
| `DW SESSION_STATUS` | | Yes | Yellow NitroRPC | `DW SESSION_STATUS` | Shows session status |
| `DW SESSION_CLOSE` | | Yes | Yellow NitroRPC | `DW SESSION_CLOSE` | Closes app session |

## Agent configuration

| Command | Alias | Approvals | Chain/Integration | Example | Notes |
| --- | --- | --- | --- | --- | --- |
| `DW ALERT <coin> BELOW <amt>` | `DW ALERT_THRESHOLD <coin> <amt>` | Yes | Local | `DW ALERT USDC BELOW 500` | Sets balance alert threshold |
| `DW AUTO_REBALANCE ON` | | Yes | Local | `DW AUTO_REBALANCE ON` | Enables auto-rebalance alerts |
| `DW AUTO_REBALANCE OFF` | | Yes | Local | `DW AUTO_REBALANCE OFF` | Disables auto-rebalance alerts |

## WalletConnect (advanced)
These are typically generated by WalletConnect requests and do not need to be typed manually.

| Command | Alias | Approvals | Chain/Integration | Example | Notes |
| --- | --- | --- | --- | --- | --- |
| `DW CONNECT <wc:uri>` | | Yes | WalletConnect | `DW CONNECT wc:...` | Pairs a dapp session |
| `DW TX <json>` | | Yes | WalletConnect | `DW TX {"to":"0x...","value":"0x0","chainId":5042002}` | EVM transaction request |
| `DW SIGN <json>` | | Yes | WalletConnect | `DW SIGN {"address":"0x...","message":"hi"}` | Personal sign request |

## Auto-detection
If the command does not start with `DW`, the agent will try to auto-detect common patterns and rewrite the cell (for example, `send 10 usdc to 0x...` becomes `DW PAYOUT 10 USDC TO 0x...`).

## Feature flags
Some commands require integrations to be enabled in `.env`:
- `DEEPBOOK_ENABLED=1` for Sui trading commands
- `CIRCLE_ENABLED=1` for Circle payouts and bridging
- `YELLOW_ENABLED=1` for Yellow session commands
- `WALLETCONNECT_ENABLED=1` for WalletConnect
- `ENS_RPC_URL` for ENS policy enforcement

Config table toggles:
- `AGENT_AUTOPROPOSE=1` enables agent auto-proposals (session create, policy set)
- `SIGNER_APPROVAL_GAS_PAID` controls gas saved estimation per approval
